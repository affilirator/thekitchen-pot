---
import { Icon } from "astro-icon/components";

interface Props {
  year: number;
  title: string;
  location: string;
  flavor: string;
  icon: string;
  color: string;
  ingredients: string[];
  index: number;
}

const { year, title, location, flavor, icon, color, ingredients, index } = Astro.props;
---

<div
  class={`flex-none w-[280px] sm:w-72 p-4 sm:p-6 rounded-2xl sm:rounded-3xl shadow-2xl backdrop-blur-lg transition-all duration-300 ${color}
    ${index % 2 === 0 ? 'mt-4 sm:mt-8' : 'mt-20 sm:mt-24'}
    hover:scale-105 hover:z-10`}
>
  {/* Flavor Burst */}
  <div class="absolute -top-6 -right-6 sm:-top-8 sm:-right-8 w-12 h-12 sm:w-16 sm:h-16 opacity-20">
    <Icon name="mdi:atom" class="w-full h-full animate-spin-slow" />
  </div>

  {/* Content */}
  <div class="relative z-10 space-y-3 sm:space-y-4">
    <div class="flex items-center gap-2 sm:gap-3">
      <Icon name={icon} class="w-6 h-6 sm:w-8 sm:h-8 text-white" />
      <div>
        <p class="text-xl sm:text-2xl font-bold text-white">{year}</p>
        <p class="text-xs sm:text-sm text-white/80">{location}</p>
      </div>
    </div>

    <h3 class="text-lg sm:text-xl font-bold text-white">{title}</h3>

    {/* Ingredients */}
    <div class="flex flex-wrap gap-1.5 sm:gap-2">
      {ingredients.map(ingredient => (
        <span class="px-2 py-0.5 sm:px-3 sm:py-1 bg-white/10 text-white text-xs sm:text-sm rounded-full backdrop-blur-sm">
          {ingredient}
        </span>
      ))}
    </div>
  </div>

  {/* Taste Label */}
  <div class="absolute -bottom-3 -right-3 sm:-bottom-4 sm:-right-4 bg-white px-3 py-1.5 sm:px-4 sm:py-2 rounded-full shadow-lg flex items-center gap-1.5 sm:gap-2">
    <span class="font-mono text-xs sm:text-sm">{flavor}</span>
    <Icon name="mdi:emoticon-tongue" class="w-4 h-4 sm:w-5 sm:h-5 text-gray-600" />
  </div>
</div>
<style>
    @keyframes spin-slow {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
    .animate-spin-slow {
      animation: spin-slow 20s linear infinite;
    }

    @media (max-width: 640px) {
      .overflow-x-hidden {
        overflow-x: auto;
        -webkit-overflow-scrolling: touch;
        scrollbar-width: none;
        -ms-overflow-style: none;
      }
      .overflow-x-hidden::-webkit-scrollbar {
        display: none;
      }
    }
  </style>