---
// src/components/Author/SimmeringPublications.astro
import { Icon } from "astro-icon/components";

const publications = [
  {
    title: "Tiny Feast",
    year: 2022,
    publisher: "Culinary Press",
    accolade: "James Beard Finalist",
    topics: ["Space Hacks", "5-Ingredient Magic", "Micro-Meal Prep"],
    link: "#",
    color: "bg-[#FFE4C4]"
  },
  {
    title: "100 Sq. Ft Gourmet",
    year: 2020,
    publisher: "Urban Kitchen",
    accolade: "NY Times Bestseller",
    topics: ["Vertical Cooking", "Appliance Alchemy", "Clutter-Free Cuisine"],
    link: "#",
    color: "bg-[#FFF5EE]"
  }
];
---

<div class="relative min-h-[600px] bg-[#FFF8E7] rounded-3xl p-12 overflow-hidden">
  {/* Simmering Pot Base */}
  <div class="absolute bottom-0 left-1/2 -translate-x-1/2 w-64 h-64 bg-[#696969] rounded-full shadow-[inset_0_-15px_30px_rgba(0,0,0,0.2)]"></div>

  {/* Bubbling Publications */}
  <div class="relative z-10 grid gap-12 hover:[&>*:nth-child(1)]:-rotate-2 hover:[&>*:nth-child(2)]:rotate-3 transition-transform duration-500">
    {publications.map((pub, index) => (
      <div class={`${pub.color} p-8 rounded-2xl shadow-[8px_8px_0_#8B4513] border-4 border-[#8B4513] relative hover:scale-105 transition-transform`}
           style={`transform-origin: ${index % 2 ? 'left' : 'right'} bottom;`}>

        {/* Stained Paper Texture */}
        <div class="absolute inset-0 opacity-20 bg-[url('/images/paper-texture.png')]"></div>

        {/* Floating Book Cover */}
        <div class="absolute -top-8 -right-8 w-24 h-32 bg-[#8B4513] rounded-lg shadow-xl rotate-12 hover:rotate-0 transition-transform">
          <div class="absolute inset-0.5 bg-[#FFE4C4] rounded-md p-2">
            <span class="font-handwritten text-[#8B4513] text-sm">Secret<br/>Ingredients</span>
          </div>
        </div>

        {/* Content */}
        <h3 class="font-handwritten text-4xl mb-4 text-[#8B4513]">{pub.title}</h3>

        <div class="space-y-4">
          <div class="flex items-center gap-3">
            <Icon name="mdi:chef-hat" class="w-6 h-6 text-[#8B4513]" />
            <span class="font-bold">{pub.publisher} ({pub.year})</span>
          </div>

          <div class="bg-[#8B451310] p-4 rounded-lg">
            <p class="text-sm font-mono">üèÜ {pub.accolade}</p>
          </div>

          <div class="flex flex-wrap gap-2">
            {pub.topics.map(topic => (
              <span class="px-3 py-1 bg-[#8B4513] text-white rounded-full text-sm">
                {topic}
              </span>
            ))}
          </div>
        </div>

        {/* Interactive Recipe Ribbon */}
        <a href={pub.link} class="absolute -bottom-4 right-4 group">
          <div class="bg-[#8B4513] text-white px-6 py-2 rounded-full flex items-center gap-2
                       hover:bg-[#A0522D] transition-transform rotate-3 group-hover:rotate-0">
            <Icon name="mdi:book-open" class="w-5 h-5" />
            <span class="font-handwritten">Read Recipe</span>
          </div>
        </a>
      </div>
    ))}
  </div>

  {/* Floating Kitchen Elements */}
  <Icon name="mdi:leaf" class="absolute top-8 left-8 w-12 h-12 text-[rgb(35,165,171)] animate-float" />
  <Icon name="mdi:pot-steam" class="absolute top-16 right-12 w-16 h-16 text-[#696969] opacity-30 animate-float-delayed" />

  <style>
    {
      @keyframes float {
        0% { transform: translateY(0px); }
        50% { transform: translateY(-20px); }
        100% { transform: translateY(0px); }
      }
      .animate-float {
        animation: float 6s ease-in-out infinite;
      }
      .animate-float-delayed {
        animation: float 7s ease-in-out 1s infinite;
      }
      .font-handwritten {
        font-family: 'Caveat', cursive;
      }
    }
  </style>
</div>