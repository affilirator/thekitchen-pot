---
import { Icon } from "astro-icon/components";
import MilestoneCard from "./MilestoneCard.astro";

const milestones = [
  {
    year: 2008,
    title: "First Michelin Star",
    location: "Paris",
    flavor: "Savory",
    icon: "mdi:star",
    color: "bg-amber-500",
    ingredients: ["Precision", "Classic Techniques", "Patience"]
  },
  {
    year: 2012,
    title: "Tiny Kitchen Revolution Begins",
    location: "NYC Studio Apartment",
    flavor: "Bitter",
    icon: "mdi:lightbulb",
    color: "bg-emerald-500",
    ingredients: ["Innovation", "Constraints", "Creativity"]
  },
  {
    year: 2020,
    title: "Bestselling Author",
    location: "Global",
    flavor: "Sweet",
    icon: "mdi:book",
    color: "bg-rose-500",
    ingredients: ["Storytelling", "Community", "Experimentation"]
  }
];
---

<div class="relative min-h-screen bg-[url('/images/kitchen-texture.jpg')] bg-fixed py-12 sm:py-24 overflow-x-hidden">
  {/* Floating Taste Particles */}
  <div class="absolute inset-0 flex justify-between pointer-events-none">
    <div class="w-1/4 sm:w-1/3 h-full bg-gradient-to-r from-white to-transparent"></div>
    <div class="w-1/4 sm:w-1/3 h-full bg-gradient-to-l from-white to-transparent"></div>
  </div>

  {/* Interactive Timeline */}
  <div class="sticky top-16 sm:top-24 h-[600px] sm:h-[500px] overflow-hidden px-4 sm:px-0">
    {/* Taste Spectrum Line */}
    <div class="absolute left-1/2 top-1/2 h-1 w-[300%] sm:w-[200%] -translate-y-1/2 -translate-x-1/2 bg-gradient-to-r from-amber-500 via-emerald-500 to-rose-500 transform -rotate-3">
      <div class="absolute inset-0 bg-white/10 backdrop-blur-sm"></div>
    </div>

    {/* Milestone Cards */}
    {/* Milestone Cards */}
    <div class="relative flex gap-6 sm:gap-8 px-4 sm:px-8 transition-transform duration-300 ease-out">
      {milestones.map((milestone, index) => (
        <MilestoneCard {...milestone} index={index} />
      ))}
    </div>
  </div>

  {/* Scroll Guidance */}
  <div class="fixed bottom-4 sm:bottom-8 left-1/2 -translate-x-1/2 flex items-center gap-2 sm:gap-3 text-white/80 animate-bounce">
    <Icon name="mdi:mouse-move-vertical" class="w-6 h-6 sm:w-8 sm:h-8" />
    <span class="font-mono text-sm sm:text-base">Stir Through Time</span>
  </div>

  <style>
    @keyframes spin-slow {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
    .animate-spin-slow {
      animation: spin-slow 20s linear infinite;
    }

    @media (max-width: 640px) {
      .overflow-x-hidden {
        overflow-x: auto;
        -webkit-overflow-scrolling: touch;
        scrollbar-width: none;
        -ms-overflow-style: none;
      }
      .overflow-x-hidden::-webkit-scrollbar {
        display: none;
      }
    }
  </style>
</div>