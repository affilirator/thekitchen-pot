---
import { getCollection } from 'astro:content';
import { Picture, Image } from 'astro:assets';

// Fetch blog posts from the 'blog' collection with category 'Bakeware', sorted by date descending
const blogPosts = await getCollection('blog', post => post.data.category === 'Bakeware');
blogPosts.sort((a, b) => new Date(b.data.pubDate).getTime() - new Date(a.data.pubDate).getTime());
const featuredPost = blogPosts.length > 0 ? blogPosts[0] : null;
const otherPosts = blogPosts.length > 1 ? blogPosts.slice(1, 5) : [];
---

<div class="min-h-screen grid grid-cols-1 sm:grid-cols-2 gap-6 p-4 max-w5xl mx-auto">
  <!-- Left column: Main content about space-saving bakeware -->
  <div class="sm:col-span-1 sm:row-span-2 bg-white shadow-lg rounded-lg p-6">
    <h1 class="text-3xl font-bold mb-4">Space-Saving Bakeware</h1>
    <p class="text-gray-700 mb-4">
      Discover our innovative space-saving bakeware solutions that help you maximize your kitchen space without compromising on quality or functionality.
    </p>
    <Image
      src="https://images.unsplash.com/photo-1603561594819-5d0c7a4f1e1f"
      alt="Bakeware"
      width={256}
      height={256}
      class=" h-64 object-cover rounded-lg mb-4"
    />
    <a
      href="/categories/bakeware/"
      class="inline-block bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600 transition duration-300"
    >
      Explore Bakeware
    </a>
  </div>

  <!-- Right upper: Featured blog post -->
  {featuredPost ? (
    <a href={`/blog/${featuredPost.data.slug}`} class="block">
      <div class="sm:col-span-1 bg-white shadow-lg rounded-lg p-4 hover:shadow-xl transition duration-300">
        <h2 class="text-2xl font-semibold mb-2">{featuredPost.data.title}</h2>
        <Image
          src={featuredPost.data.image}
          width={192}
          height={92}
          alt={featuredPost.data.title}
          class="w-full h-48 object-fit rounded-lg mb-2"
        />
        <p class="text-gray-600">{featuredPost.data.description}</p>
      </div>
    </a>
  ) : (
    <div class="sm:col-span-1 bg-white shadow-lg rounded-lg p-4">
      <h2 class="text-2xl font-semibold mb-2">Coming Soon</h2>
      <p class="text-gray-600">Stay tuned for upcoming articles about bakeware!</p>
    </div>
  )}

  <!-- Right lower: Other blog posts -->
  <div class="sm:col-span-1">
    {otherPosts.length > 0 ? (
      <div class="space-y-4">
        {otherPosts.map(post => (
          <a href={`/blog/${post.id}`} class="block">
            <div class="bg-white shadow-md rounded-lg p-4 hover:shadow-lg transition duration-300">
              <div class="flex gap-4">
                <div class="flex-shrink-0 w-1/3">
                  <Image
                    src={post.data.image}
                    width={32}
                    height={32}
                    alt={post.data.title}
                    class="w-full object-fit rounded-lg"
                  />
                </div>
                <div class="flex-grow">
                  <h3 class="text-lg font-medium mb-1">{post.data.title}</h3>
                  <p class="text-gray-600 text-sm line-clamp-2">{post.data.description}</p>
                </div>
              </div>
            </div>
          </a>
        ))}
      </div>
    ) : (
      <div class="bg-white shadow-md rounded-lg p-4">
        <p class="text-gray-600">No additional articles available at the moment.</p>
      </div>
    )}
  </div>
</div>