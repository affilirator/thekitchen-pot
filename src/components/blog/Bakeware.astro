---
import { getCollection } from 'astro:content';
import { Picture, Image } from 'astro:assets';
import bakewareImg from "@/assets/images/the-kitchen-pot-bakeware.png"

// Fetch blog posts from the 'blog' collection with category 'Bakeware', sorted by date descending
const blogPosts = await getCollection('blog', post => post.data.category === 'Bakeware');
blogPosts.sort((a, b) => new Date(b.data.pubDate).getTime() - new Date(a.data.pubDate).getTime());
const featuredPost = blogPosts.length > 0 ? blogPosts[0] : null;
const otherPosts = blogPosts.length > 1 ? blogPosts.slice(1, 5) : [];
---

<div class="grid grid-cols-1 sm:grid-cols-2 gap-8 p-6 bg-gradient-to-br from-gray-50 to-white min-h-screen">
  <!-- Left column: Main content about space-saving bakeware -->
  <div class="sm:col-span-1 sm:row-span-2 backdrop-blur-xl bg-white/80 rounded-2xl p-8 border border-gray-100 shadow-[0_8px_30px_rgb(0,0,0,0.12)] hover:shadow-[0_8px_30px_rgb(0,0,0,0.16)] transition-all duration-300 group">
    <div class="relative overflow-hidden">
      <div class="absolute inset-0 bg-gradient-to-r from-rose-100 to-teal-100 opacity-0 group-hover:opacity-10 transition-opacity duration-300 rounded-xl"></div>
      <h1 class="text-4xl font-extrabold mb-6 bg-clip-text text-transparent bg-gradient-to-r from-gray-900 to-gray-600">Space-Saving Bakeware</h1>
      <p class="text-gray-600 mb-6 text-lg leading-relaxed">
        Discover our innovative space-saving bakeware solutions that help you maximize your kitchen space without compromising on quality or functionality.
      </p>
      <div class="relative rounded-2xl overflow-hidden mb-8 transform group-hover:scale-[1.02] transition-transform duration-300">
        <Image
          src={bakewareImg}
          alt="Bakeware"
          width={512}
          height={384}
          class="w-full h-80 object-cover"
        />
        <div class="absolute inset-0 bg-gradient-to-t from-black/20 to-transparent"></div>
      </div>
      <a
        href="/categories/bakeware/"
        class="inline-flex items-center px-6 py-3 rounded-full bg-gradient-to-r from-rose-500 to-pink-500 text-white font-medium hover:from-rose-600 hover:to-pink-600 transform hover:-translate-y-0.5 transition-all duration-300 shadow-lg hover:shadow-xl"
      >
        <span>Explore Bakeware</span>
        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 ml-2" viewBox="0 0 20 20" fill="currentColor">
          <path fill-rule="evenodd" d="M10.293 3.293a1 1 0 011.414 0l6 6a1 1 0 010 1.414l-6 6a1 1 0 01-1.414-1.414L14.586 11H3a1 1 0 110-2h11.586l-4.293-4.293a1 1 0 010-1.414z" clip-rule="evenodd" />
        </svg>
      </a>
    </div>
  </div>

  <!-- Right upper: Featured blog post -->
  {featuredPost ? (
    <a href={`/blog/${featuredPost.data.slug}`} class="block group">
      <div class="sm:col-span-1 backdrop-blur-xl bg-white/80 rounded-2xl p-6 border border-gray-100 shadow-[0_8px_30px_rgb(0,0,0,0.12)] group-hover:shadow-[0_8px_30px_rgb(0,0,0,0.16)] transition-all duration-300 overflow-hidden">
        <div class="relative mb-4 rounded-xl overflow-hidden">
          <Image
            src={featuredPost.data.image}
            width={400}
            height={300}
            alt={featuredPost.data.title}
            class="w-full h-56 object-cover transform group-hover:scale-105 transition-transform duration-500"
          />
          <div class="absolute inset-0 bg-gradient-to-t from-black/30 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div>
        </div>
        <h2 class="text-2xl font-bold mb-3 text-gray-800 group-hover:text-rose-600 transition-colors duration-300">{featuredPost.data.title}</h2>
        <p class="text-gray-600 leading-relaxed">{featuredPost.data.description}</p>
      </div>
    </a>
  ) : (
    <div class="sm:col-span-1 backdrop-blur-xl bg-white/80 rounded-2xl p-6 border border-gray-100 shadow-[0_8px_30px_rgb(0,0,0,0.12)]">
      <div class="flex flex-col items-center justify-center h-full text-center space-y-4">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-16 w-16 text-gray-300" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6" />
        </svg>
        <h2 class="text-2xl font-bold text-gray-800">Coming Soon</h2>
        <p class="text-gray-600">Stay tuned for upcoming articles about bakeware!</p>
      </div>
    </div>
  )}

  <!-- Right lower: Other blog posts -->
  <div class="sm:col-span-1">
    {otherPosts.length > 0 ? (
      <div class="space-y-6">
        {otherPosts.map(post => (
          <a href={`/blog/${post.id}/`} class="block group">
            <div class="backdrop-blur-xl bg-white/80 rounded-xl p-4 border border-gray-100 shadow-[0_4px_20px_rgb(0,0,0,0.08)] hover:shadow-[0_4px_20px_rgb(0,0,0,0.12)] transition-all duration-300">
              <div class="flex gap-6">
                <div class="flex-shrink-0 w-1/3 overflow-hidden rounded-lg">
                  <Image
                    src={post.data.image}
                    width={192}
                    height={192}
                    alt={post.data.title}
                    class="w-full h-28 object-cover transform group-hover:scale-110 transition-transform duration-500"
                  />
                </div>
                <div class="flex-grow">
                  <h3 class="text-lg font-semibold mb-2 text-gray-800 group-hover:text-rose-600 transition-colors duration-300">{post.data.title}</h3>
                  <p class="text-gray-600 text-sm leading-relaxed line-clamp-2">{post.data.description}</p>
                </div>
              </div>
            </div>
          </a>
        ))}
      </div>
    ) : (
      <div class="backdrop-blur-xl bg-white/80 rounded-xl p-6 border border-gray-100 shadow-[0_4px_20px_rgb(0,0,0,0.08)] text-center">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-12 w-12 mx-auto text-gray-300 mb-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10" />
        </svg>
        <p class="text-gray-600">No additional articles available at the moment.</p>
      </div>
    )}
  </div>
</div>